/* ========================================= */
/* 1. 變數與基礎設定 (Variables & Reset)     */
/* ========================================= */
:root {
    /* --- 主題色 --- */
    --theme-orange: #ffb85c;       /* 溫暖蛋黃橘 */
    --theme-orange-dark: #e69c3d;  /* 深橘色 */
    --theme-blue: #80c9d8;         /* 水淺蔥藍 */
    --theme-blue-hover: #6ab5c4;   /* 水淺蔥藍加深 */
    --theme-green: #88c070;        /* 草地綠 */
    
    /* --- 背景色 --- */
    --bg-cream: #fffcf7;           /* 米白主背景 */
    --bg-sidebar: #fdfae8;         /* 側邊欄淡黃色 */
    
    /* --- 文字色 --- */
    --text-dark: #5a4d41;          /* 深棕色 */
    --text-light: #8c8279;         /* 淺棕色 */
    
    /* --- 陰影與圓角 --- */
    --shadow-soft: 0 8px 24px rgba(90, 77, 65, 0.08), 0 2px 8px rgba(90, 77, 65, 0.04);
    --shadow-hover: 0 12px 28px rgba(90, 77, 65, 0.15), 0 4px 12px rgba(90, 77, 65, 0.08);
    --radius-md: 16px;
    --radius-lg: 24px;
}

* { box-sizing: border-box; }

body {
    font-family: 'GenJyuuGothic', 'Noto Sans TC', 'Microsoft JhengHei', sans-serif;
    margin: 0;
    padding-top: 60px;
    background-color: var(--bg-cream);
    color: var(--text-dark);
    background-image: radial-gradient(var(--text-light) 0.5px, transparent 0.5px);
    background-size: 30px 30px;
}

h1, h2, h3, h4 { 
    color: var(--text-dark); 
    font-weight: bold; 
    letter-spacing: 0.05em; 
}

h1 { color: var(--theme-green); }
h2 { color: white; text-shadow: 2px 2px 8px rgba(0,0,0,0.3); }
h3 { color: var(--theme-orange-dark); position: relative; display: inline-block; }

/* h3 裝飾線 */
h3::after {
    content: ''; 
    display: block; 
    width: 90%; 
    height: 3px;
    background-color: var(--theme-orange); 
    margin: 8px auto 0;
    border-radius: 2px; 
    opacity: 0.6;
}

a { 
    text-decoration: none; 
    color: var(--text-dark); 
    transition: all 0.3s ease; 
}
a:hover { color: var(--theme-orange); }

/* ========================================= */
/* 2. 全域元件 (Overlay, Header, Sidebar)    */
/* ========================================= */

/* --- 開場動畫 Overlay --- */
#floating-overlay {
    position: fixed; top: 0; left: 0; 
    width: 100%; height: 100%;
    background-color: rgba(90, 77, 65, 0.6); 
    z-index: 9999; 
    display: block; 
    cursor: pointer;
    animation: overlayFadeIn 0.8s ease-out forwards;
    backdrop-filter: blur(5px);
}
#floating-overlay.fade-out {
    animation: overlayFadeOut 0.5s ease-in forwards; 
    pointer-events: none; 
}
.floating-content {
    position: absolute; left: 0; top: 0;
    display: flex; flex-direction: column; align-items: center;
    filter: drop-shadow(0 15px 30px rgba(48, 38, 28, 0.4));
}
.floating-content img {
    width: 800px; max-width: 90vw; height: auto; min-width: 300px;
    border-radius: var(--radius-md); 
    opacity: 0.92; 
    border: 3px solid rgba(255, 255, 255, 0.8);
    transition: width 0.3s ease;
}
.floating-content p {
    color: rgba(255, 255, 255, 0.95); 
    margin-top: 15px;
    font-size: 1rem; font-weight: bold; letter-spacing: 2px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}
@keyframes overlayFadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes overlayFadeOut { from { opacity: 1; } to { opacity: 0; } }

/* --- 頂部導航列 Header --- */
#main-header {
    position: fixed; top: 0; left: 0; 
    width: 100%; height: 60px;
    background-color: rgba(255, 252, 247, 0.85); 
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 12px rgba(90, 77, 65, 0.05); 
    z-index: 1000;
    display: flex; justify-content: flex-start; align-items: center;
    padding-left: 20px; 
    border-bottom: 1px solid rgba(0,0,0,0.05);
}

/* 選單按鈕 */
#menu-btn {
    background-color: transparent; border: none; padding: 0; margin-right: 20px; cursor: pointer;
    display: flex; align-items: center; gap: 15px; margin-left: 25px;
}
#menu-btn .btn-text {
    color: var(--theme-blue); font-size: 1.2rem; font-weight: bold; letter-spacing: 3px;
    border-top: 2px solid var(--theme-blue); border-bottom: 2px solid var(--theme-blue);
    padding: 6px 0; transition: all 0.3s;
}
#menu-btn .btn-arrow {
    width: 30px; height: 30px; background-color: var(--theme-blue); color: white; border-radius: 50%;
    display: flex; justify-content: center; align-items: center; font-size: 1.1rem; transition: transform 0.3s ease;
}
#menu-btn:hover .btn-text { opacity: 0.8; padding: 8px 0; }
#menu-btn:hover .btn-arrow { transform: translateX(5px); background-color: var(--theme-blue-hover); }

/* 導航列表 */
#main-nav {
    opacity: 0; visibility: hidden; 
    transform: translateX(-20px);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
#main-nav.show { opacity: 1; visibility: visible; transform: translateX(0); }
#main-nav ul { list-style: none; padding: 0; margin: 0; display: flex; align-items: center; }
#main-nav ul li { padding: 0 5px; position: relative; }
#main-nav ul li a { display: block; padding: 10px 15px; font-weight: bold; white-space: nowrap; border-radius: 10px; color: var(--text-dark); }
#main-nav > ul > li > a:hover { background-color: rgba(255, 153, 51, 0.1); color: var(--theme-orange-dark); }

/* 警示連結 */
.alert-link { color: #e57373 !important; font-weight: bold; background-color: #fff5f5; }
.alert-link:hover { color: #d32f2f !important; background-color: #fee; }

/* --- 左側固定側邊欄 Sidebar --- */
#sidebar-left {
    width: 160px;
    background: linear-gradient(to right, var(--bg-sidebar), #fff);
    border-right: 1px solid rgba(0,0,0,0.05);
    box-shadow: 2px 0 10px rgba(90, 77, 65, 0.02);
    position: fixed; top: 60px; bottom: 0; z-index: 99;
    display: flex; flex-direction: column; align-items: center;
    padding-top: 30px; overflow-y: auto; 
    scrollbar-width: none; -ms-overflow-style: none;
}
#sidebar-left::-webkit-scrollbar { display: none; }

.vertical-title {
    flex-grow: 1; display: flex; justify-content: center; align-items: center;
    padding: 10px 0 20px 0; width: auto; 
    background-image: url('data:image/svg+xml;utf8,<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="1" fill="%2388c070" opacity="0.4"/></svg>');
    background-repeat: repeat-y; background-position: center right; padding-right: 20px;
}
.vertical-title h1 {
    font-size: 1.8rem; margin: 0; font-weight: 800; letter-spacing: 0.2em;
    text-shadow: 1px 1px 0px #fff, 2px 2px 0px rgba(128, 201, 216, 0.4);
}
.vertical-title h1 a {
    text-decoration: none; display: flex; flex-direction: column; align-items: center; gap: 15px; transition: opacity 0.3s;
}
.vertical-title h1 a:hover { opacity: 1; }

.title-icon {
    width: 55px; height: auto; display: block;
    filter: drop-shadow(2px 2px 0px rgba(128, 201, 216, 0.5));
    transition: transform 0.3s;
}

.title-text { writing-mode: vertical-rl; text-orientation: upright; white-space: nowrap; }
.title-text span { display: inline-block; transition: transform 0.2s; }
.title-text span:nth-child(-n+6) { color: var(--theme-blue); } /* ゆるキャン△ */
.title-text span:nth-child(n+8) { color: var(--theme-orange); } /* 聖地巡禮地圖 */
.title-text .spacer { height: 5px; display: inline-block; margin-top: -15px; }

/* 標題跳動動畫 */
@keyframes pop-jump {
    0% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.3) rotate(5deg); }
    100% { transform: scale(1) rotate(0deg); }
}
.vertical-title h1 a:hover .title-icon { animation: pop-jump 0.4s ease forwards; }
.vertical-title h1 a:hover .title-text span { animation: pop-jump 0.4s ease forwards; }
/* 逐字延遲 */
.vertical-title h1 a:hover .title-text span:nth-child(1) { animation-delay: 0.05s; }
.vertical-title h1 a:hover .title-text span:nth-child(2) { animation-delay: 0.1s; }
.vertical-title h1 a:hover .title-text span:nth-child(3) { animation-delay: 0.15s; }
.vertical-title h1 a:hover .title-text span:nth-child(4) { animation-delay: 0.2s; }
.vertical-title h1 a:hover .title-text span:nth-child(5) { animation-delay: 0.25s; }
.vertical-title h1 a:hover .title-text span:nth-child(6) { animation-delay: 0.3s; }
.vertical-title h1 a:hover .title-text span:nth-child(8) { animation-delay: 0.35s; }
.vertical-title h1 a:hover .title-text span:nth-child(9) { animation-delay: 0.4s; }
.vertical-title h1 a:hover .title-text span:nth-child(10) { animation-delay: 0.45s; }
.vertical-title h1 a:hover .title-text span:nth-child(11) { animation-delay: 0.5s; }
.vertical-title h1 a:hover .title-text span:nth-child(12) { animation-delay: 0.55s; }
.vertical-title h1 a:hover .title-text span:nth-child(13) { animation-delay: 0.6s; }

.related-sites { width: 100%; padding: 20px 20px 10px 20px; text-align: center; flex-shrink: 0; }
.official-site-link { display: block; margin-bottom: 10px; }
.official-site-link img {
    max-width: 100%; height: auto; border-radius: 12px; 
    box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s;
}
.official-site-link:hover img { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
.sidebar-copyright {
    width: 100%; padding: 0 10px 30px 10px; text-align: center; font-size: 0.65rem; color: #333; opacity: 0.8; flex-shrink: 0; line-height: 1.6;        
}
.sidebar-copyright p { margin: 0; line-height: 1.5; }

/* 頁面佈局容器 */
#page-wrapper { display: flex; }
#main-content { margin-left: 160px; flex-grow: 1; padding-bottom: 80px; background-color: transparent; }


/* ========================================= */
/* 3. 首頁專用 (Index Page)                  */
/* ========================================= */
#hero {
    position: relative; background-color: var(--text-light); color: white;
    text-align: center; padding: 160px 30px 120px; border-radius: 0; margin-bottom: 60px;
    box-shadow: var(--shadow-soft); overflow: hidden;
}

/* 背景層 */
#hero-bg {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;
    background-image: linear-gradient(to bottom, rgba(90, 77, 65, 0.3), rgba(90, 77, 65, 0.6)), url('hero-bg-1.jpg');
    background-size: cover; background-position: center; transition: opacity 0.8s ease-in-out; opacity: 1;
}

/* 底部鋸齒 */
#hero::after {
    content: ''; position: absolute; bottom: -10px; left: 0; width: 100%; height: 20px;
    background-color: var(--bg-cream);
    mask-image: radial-gradient(circle at 10px bottom, transparent 10px, black 10.5px);
    mask-size: 20px 20px; mask-repeat: repeat-x;
    -webkit-mask-image: radial-gradient(circle at 10px bottom, transparent 10px, black 10.5px);
    -webkit-mask-size: 20px 20px; -webkit-mask-repeat: repeat-x;
    z-index: 1;
}

#hero h2 { font-size: 3.5em; margin-bottom: 15px; color: white; font-weight: 900; position: relative; z-index: 2; }
#hero p { font-size: 1.2rem; opacity: 0.9; margin-bottom: 30px; position: relative; z-index: 2; }
#hero .button {
    display: inline-block; background-color: var(--theme-blue); color: white;
    padding: 12px 36px; border-radius: 50px; font-size: 1.1rem; font-weight: bold;
    box-shadow: 0 4px 15px rgba(102, 204, 255, 0.4); transition: all 0.3s ease; border: 2px solid transparent; position: relative; z-index: 2;
}
#hero .button:hover { 
    background-color: #fff; color: var(--theme-blue); border-color: var(--theme-blue);
    transform: translateY(-3px); box-shadow: 0 6px 20px rgba(102, 204, 255, 0.5);
}

/* 精選景點卡片 */
#featured-spots { padding: 40px; text-align: center; max-width: 90%; margin: 0 auto; }
#featured-spots h3 { font-size: 2rem; margin-bottom: 50px; }
.spots-grid {
    display: grid; grid-template-columns: repeat(3, 1fr); /* 強制3欄 */
    gap: 30px; margin-top: 30px; padding-bottom: 20px;
}
.card-container { display: contents; }
.spot-card {
    width: 100%; background-color: #fff; border-radius: var(--radius-lg); box-shadow: var(--shadow-soft);
    overflow: hidden; text-align: left; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 1px solid rgba(0,0,0,0.03); position: relative;
}
.spot-card:hover { transform: translateY(-12px) scale(1.02); box-shadow: var(--shadow-hover); }
.spot-card img { width: 100%; height: 220px; object-fit: cover; display: block; transition: transform 0.5s ease; }
.spot-card:hover img { transform: scale(1.05); }
.spot-card h4 { padding: 25px 25px 10px; margin: 0; color: var(--theme-orange-dark); font-size: 1.3rem; display: flex; align-items: center; }
.spot-card h4::before { content: '▲'; font-size: 0.8em; color: var(--theme-green); margin-right: 8px; transform: translateY(-2px); }
.spot-card p { padding: 0 25px 30px; margin: 0; font-size: 0.95em; color: var(--text-light); line-height: 1.6; }


/* ========================================= */
/* 4. 內頁通用 (Inner Pages)                 */
/* ========================================= */
.page-header-banner {
    text-align: center; padding: 80px 20px 60px; color: var(--text-dark);
}
.page-header-banner h2 {
    font-size: 2.5rem; margin-bottom: 15px; color: var(--theme-orange-dark);
    text-shadow: 2px 2px 0px rgba(255,255,255,0.8);
}
.page-header-banner p {
    font-size: 1.1rem; color: var(--text-light); max-width: 600px; margin: 0 auto; line-height: 1.6;
}

.content-body {
    background-color: #fff; max-width: 1000px; margin: 0 auto 60px; padding: 50px;
    border-radius: var(--radius-lg); box-shadow: var(--shadow-soft); line-height: 1.8; position: relative;
}

.content-body h3 {
    font-size: 1.6rem; margin-top: 40px; margin-bottom: 20px; padding-bottom: 10px;
    border-bottom: 3px dashed rgba(0,0,0,0.1); color: var(--theme-green);
}
.content-body h3:first-child { margin-top: 0; }
.content-body ul { margin-bottom: 20px; padding-left: 20px; }
.content-body ul li { margin-bottom: 10px; list-style-type: disc; color: var(--text-dark); }
.content-image { margin: 30px 0; text-align: center; }
.content-image img {
    max-width: 100%; height: auto; border-radius: var(--radius-md);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 5px solid #fff;
}
.content-image figcaption { margin-top: 10px; font-size: 0.9rem; color: var(--text-light); font-style: italic; }

blockquote {
    background-color: var(--bg-sidebar); border-left: 5px solid var(--theme-orange);
    margin: 30px 0; padding: 20px; border-radius: 0 var(--radius-md) var(--radius-md) 0;
    color: var(--text-dark); font-weight: bold;
}
blockquote p { margin: 0; }
.divider { border: 0; border-top: 2px dashed #e0d8cc; margin: 40px 0; }


/* ========================================= */
/* 5. 動畫介紹頁 (Anime Page)                */
/* ========================================= */
.anime-section { margin-bottom: 50px; }

/* 系列列表表格 */
.series-list table {
    width: 100%; border-collapse: collapse; margin-top: 15px;
    background-color: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.series-list th, .series-list td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
.series-list th { background-color: #f9f5f0; color: #e67e22; width: 30%; font-weight: bold; }

/* 角色卡片 Grid */
.character-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px; margin-top: 20px;
}
.char-card {
    background: white; border-radius: 12px; overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: transform 0.3s ease;
    display: flex; align-items: center;
}
.char-card:hover { transform: translateY(-5px); }
.char-img { width: 100px; height: 100%; flex-shrink: 0; }
.char-img img { width: 100%; height: 100%; object-fit: cover; }
.char-info { padding: 10px; }
.char-info h4 { margin: 0 0 5px 0; color: #4a4a4a; font-size: 1.1rem; }
.jp-name { font-size: 0.7rem; color: #999; font-weight: normal; white-space: nowrap; }
.tag { color: #e67e22; font-size: 0.85rem; margin-bottom: 20px; font-weight: bold; }
.char-info p { font-size: 0.9rem; color: #666; line-height: 1.5; margin: 0; }


/* ========================================= */
/* 6. 美食指南頁 (Food Page)                 */
/* ========================================= */
.food-card {
    display: flex !important; /* 強制橫向 */
    flex-direction: row; 
    background: white; border-radius: 12px; overflow: hidden; margin-bottom: 40px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08); align-items: stretch;
}
.food-card.reverse { flex-direction: row-reverse; }

.food-img { flex: 1; width: 50%; min-width: 300px; position: relative; }
.food-img img { width: 100%; height: 100%; object-fit: cover; display: block; aspect-ratio: 4/3; }

.food-info { flex: 1; width: 50%; padding: 30px; display: flex; flex-direction: column; justify-content: center; }
.food-info h3 { margin: 0 0 5px 0; color: #e67e22; font-size: 1.4rem; }

.episode-tag {
    display: inline-block; background-color: #f0f0f0; color: #666; font-size: 0.8rem;
    padding: 4px 8px; border-radius: 4px; margin-bottom: 15px; align-self: flex-start;
}
.recipe-box {
    background-color: #fff9f0; border-left: 4px solid #e67e22;
    padding: 15px; margin-top: 15px; border-radius: 4px; font-size: 0.9rem;
}
.recipe-box ul { margin: 5px 0 0 20px; padding: 0; color: #555; }


/* ========================================= */
/* 7. 天氣預報頁 (Weather Page)              */
/* ========================================= */
.weather-embed-container {
    border-radius: var(--radius-md); overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 5px solid #fff; margin-bottom: 10px;
}
.weather-btn {
    display: inline-block; background-color: var(--theme-blue); color: white;
    padding: 12px 24px; border-radius: 50px; font-weight: bold; text-decoration: none;
    transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(102, 204, 255, 0.3);
}
.weather-btn:hover {
    background-color: var(--theme-blue-hover); transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(102, 204, 255, 0.4); color: white;
}


/* ========================================= */
/* 9. RWD 響應式設定 (Media Queries)          */
/* ========================================= */

/* 筆電與平板 (小於 1200px) */
@media (max-width: 1200px) {
    .spots-grid { grid-template-columns: repeat(2, 1fr); }
}

/* 手機版 (小於 768px) */
@media (max-width: 768px) {
    /* 通用佈局調整 */
    .content-body { padding: 25px; margin-left: 15px; margin-right: 15px; }
    .page-header-banner h2 { font-size: 2rem; }

    /* 首頁 Grid 變單欄 */
    .spots-grid { grid-template-columns: 1fr; }

    /* 動畫頁卡片變直排 */
    .char-card { flex-direction: column; }
    .char-img { width: 100%; height: 200px; }

    /* 美食頁卡片變直排 */
    .food-card, .food-card.reverse { flex-direction: column !important; }
    .food-img, .food-info { width: 100%; }
    .food-img { height: 250px; }
}